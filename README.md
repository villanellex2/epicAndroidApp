# $name
$name - Android приложение, предоставляющее возможность создания экранов для EPICS. Конфигурация списка устройств происходит с помощью json файлов конфигурации, управление которыми происходит в настройках.

# Конфигурация экранов
Конфигурационные файлы пишутся в формате json. Каждый файл конфигурации состоит из двух частей - списка шаблонов и списка отображаемых экранов.

## Список устройств.
Список устройств является массивом с названием "screens".
Каждое устройство обязано иметь такие поля:
* displayed_name - строка с отображаемым названием устройства.
* type - название шаблона экрана из списка шаблонов в этом же файле конфигурации.
* $pv - названия префиксов pv. Подробнее о префиксах будет в разделе о виджетах.

### Пример раздела screens:
``` json
"screens": [
    {
      "displayed_name": "Microwave cavity",
      "$pv": "Cavity1",
      "$pv2": "Cavity5",
      "type": "Resonator"
    }
  ]
```

## Список шаблонов:
Список шаблонов указывается в файле конфигурации json объектом "templates":
``` json
"templates": [
    "Resonator": {
```
Название шаблона указывается в разделе "type" у экрана. В шаблоне описывается внешний вид экрана. Объекты на экране бывают двух видов: контейнеры и виджеты. Каждый элемент на экране обязан иметь строковое поле "type" с типом объекта.

### Контейнеры.
#### LIST - является обычным списком. Список имеет всего два возможных поля:
* "orientaion" - ориентация списка. Имеет два возможных значения - "vertical" и "horizontal". При отсутствии этого поля или его некорректном значении выбирается вертикальная ориентация.
* "content" - массив с элементами экрана, виджетами и контейнерами.

#### TABLE - таблица. Возможные поля:
* "column_count" - список столбцов в таблице.
* "content" - массив с элементами экрана, виджетами и контейнерами.

### Виджеты
Для отображения виджет обязан иметь поле:
* "pv_name" - строковое значение, название переменной из которой будет браться информация для отображения. В значении можно указать название макроподстановки, которую обязательно указать в описании экрана в разделе "screens".

Каждый виджет может иметь такие необязательные поля:
* "height" - высота элемента. Может иметь числовое значение равное числу логических пикселей, либо же строковые значения "wrap_content" и "match_parent". Стандартное значение - "40" для всех виджетов, кроме графика. Для графика - "150".
* "widht" - ширина элемента. Может иметь числовое значение равное числу логических пикселей, либо же строковые значения "wrap_content" и "match_parent". Стандартное значение - "match_parent".

``` json
{
      "pv_name": "$pv:PRNG:LONGOUT",
      "type": "TEXT_FIELD",
      "width": "match_parent",
      "height": "wrap_content",
      "displayed_name": "Amplitude"
},
```
В данном примере создастся виджет TEXT_FIELD, с именем "Amplitude", с минимально возможной высотой и шириной равной ширине родителя.
В описании экрана необходимо будет указать поле "$pv" - значение которого будет использовано в качестве макроподстановки в имени PV. Если в описании экрана будет указано
``` json
  "$pv": "Cavity1"
```
То название отображаемой в виджете PV будет: "Cavity1:PRNG:LONGOUT"

#### TEXT_FIELD
Умеет получать и отображать единичные значения таких типов: FLOAT, DOUBLE, SHORT, INT, STRING. В данном виджете невозможно редактировать данные, он их только отображает. В случае массивов выводит на экран 0 элемент в массиве.

####  TEXT_INPUT_NUMBER
Умеет получать, отображать и редактировать единичные значения таких типов: FLOAT, DOUBLE, SHORT, INT.

#### BOOLEAN_FIELD
Отображает бинаарные значения на экране.

#### BOOLEAN_VALUE
Отображает и редактирует бинарные значения.

#### GRAPH 
Отображает массивы значений FLOAT, DOUBLE, SHORT, INT, BYTE на экране. с помощью графика.
Имеет специфические поля:
* "description" - строковое значение. Небольшое описание на графике.
* "lable" - строковое значение. Описание набора данных.
* "pintch_zoom" - boolean_int. В случае 0 - оси маштабируются по отдельности. Иначе оси маштабируются одновременно. //todo
* "filled" - boolean_int. В случае 1 - пространство под графиком не окрашивается. //todo

### Пример раздела "templates":
``` json
"templates": {
    "Resonator": {
      "type": "LIST",
      "orientation": "vertical",
      "content": [
        {
          "pv_name": "$pv:prng0:bi",
          "type": "BOOLEAN_INPUT",
          "width": "match_parent",
          "height": "wrap_content"
        },
        {
          "pv_name": "$pv2:prng0:aao",
          "type": "GRAPH",
          "label": "numbers"
        },
        {
          "pv_name": "$pv:prng0:longout",
          "type": "TEXT_FIELD",
          "width": "match_parent",
          "height": "wrap_content"
        },
        {
          "pv_name": "$pv:prng0:ao",
          "type": "TEXT_INPUT_NUMBER"
        },
        {
          "type": "LIST",
          "orientation": "horizontal",
          "content": [
            {
              "pv_name": "$pv:prng0:ao",
              "type": "TEXT_FIELD",
              "height": "20"
            },
            {
              "pv_name": "$pv2:prng0:ao",
              "type": "TEXT_FIELD",
              "height": "30"
            }
          ]
        },
        {
          "pv_name": "$pv2:prng0:ao0",
          "type": "TEXT_FIELD"
        }
      ]
    }
  }
  ```
